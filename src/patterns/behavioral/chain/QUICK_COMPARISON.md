# 责任链 vs 迭代器 - 快速对比

## 🎯 一句话总结

| 模式       | 核心问题   | 一句话描述                   |
| ---------- | ---------- | ---------------------------- |
| **责任链** | 谁来处理？ | 寻找合适的处理者，找到就停止 |
| **迭代器** | 如何访问？ | 遍历所有元素，逐个访问       |

## 📊 核心区别

| 维度     | 责任链 ⛓️            | 迭代器 🔄        |
| -------- | -------------------- | ---------------- |
| **目的** | 🎯 处理请求          | 📚 遍历集合      |
| **访问** | 找到处理器后**停止** | **访问所有**元素 |
| **中断** | ✅ 可随时中断        | ❌ 通常遍历全部  |
| **逻辑** | 判断+处理            | 只访问           |
| **流动** | 请求传递             | 指针移动         |
| **关注** | **谁**来处理         | **如何**访问     |

## 🏃 形象比喻

### 责任链 = 接力赛 🏃‍♂️

```
棒传给下一个人 → 找到终点就停止 → 重点：谁接棒？谁跑完？
```

### 迭代器 = 点名 📋

```
叫第一个人 → 叫第二个人 → ... → 叫完所有人 → 重点：如何遍历？
```

## 💻 代码对比

### 责任链

```typescript
// 目标：找到能处理的处理器
const h1 = new Handler(x => (typeof x === 'number' ? `处理:${x}` : undefined))
const h2 = new Handler(
  x => (typeof x === 'string' ? `处理:${x}` : undefined),
  h1
)

h2.handle(42) // h1处理，停止 ✋
h2.handle('hello') // h2处理，停止 ✋
```

### 迭代器

```typescript
// 目标：访问所有元素
const iter = [1, 2, 3].values()
for (const item of iter) {
  console.log(item) // 1, 2, 3 全部访问 ✅
}
```

## 🎓 实际例子

### 责任链

- ✅ **Express 中间件**：认证 → 权限 → 业务（可能在任何一步停止）
- ✅ **审批流程**：组长 → 经理 → 总监（找到能批准的就停止）
- ✅ **异常处理**：catch 块链（第一个匹配就处理）

### 迭代器

- ✅ **for...of 循环**：遍历数组所有元素
- ✅ **Array.map()**：转换所有元素
- ✅ **树遍历**：访问所有节点

## 🔑 记忆口诀

```
责任链：找人办事，找到就停
迭代器：挨个点名，一个不落
```

## ⚡ 快速判断

遇到问题时，问自己：

**"我需要找一个处理者，还是访问所有元素？"**

- 找处理者 → 责任链
- 访问全部 → 迭代器

## 📚 深入学习

- 详细对比：[ChainVsIterator.md](./ChainVsIterator.md)
- 实战演示：[ChainVsIteratorDemo.ts](./examples/ChainVsIteratorDemo.ts)
- 责任链详解：[README.md](./README.md)

## 🚀 快速体验

```bash
# 运行对比演示
npx tsx src/patterns/behavioral/chain/examples/ChainVsIteratorDemo.ts
```

---

**记住**：虽然它们都涉及"顺序访问"，但**目的完全不同**！
